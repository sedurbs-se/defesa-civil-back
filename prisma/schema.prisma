generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Usuario {
  id     String   @id @default(uuid())
  email  String   @unique
  nome   String
  senha  String
  agente  Agente?  
}

model Desastre {
  id        String        @id @default(uuid())
  endereco  String
  municipio String
  evento    String
  data      DateTime
  agenteId  String        @map("agente_id")
  agente    Agente        @relation(fields: [agenteId], references: [id])
  areas     AreaAfetada[]
}

model AreaAfetada {
  id                    String                @id @default(uuid())
  coordenadas           String
  desastreId            String                @map("desastre_id")
  desastre              Desastre              @relation(fields: [desastreId], references: [id])
  endereco              String
  nome                  String
  unidadesHabitacionais UnidadeHabitacional[]
}

model UnidadeHabitacional {
  id            String      @id @default(uuid())
  areaAfetadaId String
  areaAfetada   AreaAfetada @relation(fields: [areaAfetadaId], references: [id])
  familia      Familia[] 
}

model Agente {
  id        String     @id @default(uuid())
  nome      String
  funcao    String
  contato   String
  desastres Desastre[]
  usuarioId String     @map("usuario_id") @unique
  user      Usuario?   @relation(fields: [usuarioId], references: [id])
}

model Familia {
  id        String @id @default(uuid())
  afetados   Afetado[] 
  unidadeHabitacionalId String @map("unidade_habitacional_id")
  unidadeHabitacional UnidadeHabitacional @relation(fields: [unidadeHabitacionalId], references: [id])
}

model Afetado {
  id                      String              @id @default(uuid())
  familiaId               String              @map("familia_id")
  familia                 Familia             @relation(fields: [familiaId], references: [id])
  nome                    String
  idade                   Int
  sexo                    String
  cpf                     String
  contato                 String
  temAguaPotavel          Boolean
  temEletricidade         Boolean
  podeCozinhar            Boolean
  EmParenteOuCasaDeAmigos Boolean
  EmAbrigoPublico         Boolean
  exAguaPotavel           String
  exEletricidade          String
  exParenteOuCasaDeAmigos String
  exAbrigoPublico         String
}

// model InstalacaoPublica {}

// Talvez usar ao inv√©s de pergunta e respostas em afetados criar tabelas de perguntas e respostas
